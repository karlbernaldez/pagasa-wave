const t="http://34.172.63.27:5000/api/auth",s=async e=>{const r=await fetch(`${t}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const o=await r.json();throw new Error(o.message||"Registration failed")}return r.json()},n=async e=>{try{const r=await fetch(`${t}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!r.ok){const o=await r.json();throw new Error(o.message||"Login failed. Please check your credentials.")}return await r.json()}catch(r){throw console.error("Login Error:",r),new Error(r.message||"Something went wrong during login.")}},a=async()=>{try{const e=await fetch(`${t}/refresh-token`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok){console.error(`Failed to refresh access token. Status: ${e.status}`);const o=await e.json();throw console.error("Error details:",o),new Error(`Failed to refresh access token. ${o.message||e.statusText}`)}return(await e.json()).accessToken}catch(e){return console.error("Error refreshing access token:",e),null}},c=async()=>{try{const e=await fetch(`${t}/logout`,{method:"POST",credentials:"include"});if(localStorage.clear(),!e.ok){const r=await e.json().catch(()=>null);throw new Error(r?.message||"Failed to logout on server")}window.location.href="/login"}catch(e){console.error("Error during logout:",e.message||e),alert("Logout failed. Please try again.")}};export{n as a,s as b,c as l,a as r};
